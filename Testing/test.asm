.ORIG x3000
;LD R0, zeros
;LD R1, azul
;LD R2, count
;LD R3, rojo
;LD R4, later

;STR R1,R0,#0
;STR R3,R4,#0
;ADD R0, R0, #1
;ADD R4, R4, #1
;ADD R2, R2, #-1

AND R0, R0, x0000
AND R1, R1, x0000
AND R2, R2, x0000
AND R3, R3, x0000
AND R4, R4, x0000
AND R5, R5, x0000
AND R6, R6, x0000
AND R7, R7, x0000

; R2 ser치 la coordenda de c치lculo de ubicaci칩n
; R5 Y R6 ser치n las coordenadas del pacman (x, y)

ADD R5, R5, #0
ADD R6, R6, #0

BRnzp LOOP

LOOP

AND R1, R1, x0000

LD R0, DRAW0ON
STR R1, R0, #0
LD R0, DRAW1ON
STR R1, R0, #0
LD R0, DRAW2ON
STR R1, R0, #0
LD R0, DRAW3ON
STR R1, R0, #0
LD R0, DRAW4ON
STR R1, R0, #0
LD R0, DRAW5ON
STR R1, R0, #0
LD R0, DRAW6ON
STR R1, R0, #0
LD R0, DRAW7ON
STR R1, R0, #0

LD R1, c_white

LD R2, DRAW0
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW0ON

LD R2, DRAW1
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW1ON

LD R2, DRAW2
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW2ON

LD R2, DRAW3
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW3ON

LD R2, DRAW4
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW4ON

LD R2, DRAW5
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW5ON

LD R2, DRAW6
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW6ON

LD R2, DRAW7
LEA R0, #2
ADD R5, R5, #0
BRp GETXCORD
LEA R0, #2
ADD R6, R6, #0
BRp GETYCORD
STR R1, R2, #0
ST R2, DRAW7ON

GETC

LD R1, ascii_w
NOT R1, R1
ADD R1, R1, #1
ADD R1, R0, R1
BRnp #3
ADD R5, R5, #0
BRz #1
ADD R5, R5, #-1

LD R1, ascii_a
NOT R1, R1
ADD R1, R1, #1
ADD R1, R0, R1
BRnp #3
ADD R6, R6, #0
BRz #1
ADD R6, R6, #-1

LD R1, ascii_s
NOT R1, R1
ADD R1, R1, #1
ADD R1, R0, R1
BRnp #3
ADD R1, R5, #-14
BRz #1
ADD R5, R5, #1

LD R1, ascii_d
NOT R1, R1
ADD R1, R1, #1
ADD R1, R0, R1
BRnp #3
ADD R1, R6, #-15
BRz #1
ADD R6, R6, #1

OUT

BRnzp LOOP

HALT

GETXCORD

ST R1, AUXR1
ST R5, AUXR5

LD R1, count_x
ADD R2, R2, R1
ADD R5, R5, #-1
BRp #-3

LD R1, AUXR1
LD R5, AUXR5

JMP R0

GETYCORD

ST R1, AUXR1
ST R6, AUXR6

LD R1, count_y
ADD R2, R2, R1
ADD R6, R6, #-1
BRp #-3

LD R1, AUXR1
LD R6, AUXR6

JMP R0

c_blue .FILL x001F
c_red .FILL x7C00
c_white .FILL x7FFF
zeros .FILL xC000
count_x .FILL #1024
count_y .FILL #8

ascii_w .FILL #119
ascii_a .FILL #97
ascii_s .FILL #115
ascii_d .FILL #100

DRAW0 .FILL xC103
DRAW1 .FILL xC104
DRAW2 .FILL xC182
DRAW3 .FILL xC185
DRAW4 .FILL xC202
DRAW5 .FILL xC205
DRAW6 .FILL xC283
DRAW7 .FILL xC284

DRAW0ON .FILL xC103
DRAW1ON .FILL xC104
DRAW2ON .FILL xC182
DRAW3ON .FILL xC185
DRAW4ON .FILL xC202
DRAW5ON .FILL xC205
DRAW6ON .FILL xC283
DRAW7ON .FILL xC284

AUXR0 .FILL x0000
AUXR1 .FILL x0000
AUXR2 .FILL x0000
AUXR3 .FILL x0000
AUXR4 .FILL x0000
AUXR5 .FILL x0000
AUXR6 .FILL x0000
AUXR7 .FILL x0000

.END